buyer_stream:
  metric_configs: [buyer_stream]
  connections: [vertica, trino]
  sql: buyer_stream
  column_map:
    query: query_id
    item: item_id
    cookie: cookie_id
    user: user_id
  dimensions:
    - platform
    - vertical
    - logical_category
    - category
    - subcategory
    - param1
    - param2
    - param3
    - param4
    - region
    - city
    - location_group
    - population_group
    - location_level
    - rec_engine
    - x_vertical
    - x_logical_category
    - x_category
    - x_subcategory
    - x_param1
    - x_param2
    - x_param3
    - x_param4
    - x_region
    - x_city
    - x_location_group
    - x_population_group
    - x_location_level
    - condition
    - boost_class
    - user_segment_market
    - is_asd
    - price_group
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

pageviews:
  metric_configs: [pageviews]
  connections: [vertica, trino]
  sql: page_views
  column_map:
    cookie: cookie_id
    user: user_id
  dimensions:
    - platform
    - vertical
    - logical_category
    - category
    - subcategory
    - param1
    - param2
    - param3
    - param4
    - region
    - city
    - location_group
    - population_group
    - location_level
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

user_dau:
  metric_configs: [user_dau]
  connections: [vertica, trino]
  sql: page_views
  column_map:
    cookie: cookie_id
    user: user_id
  dimensions:
    - platform
    - vertical
    - logical_category
    - category
    - subcategory
    - param1
    - param2
    - param3
    - param4
    - region
    - city
    - location_group
    - population_group
    - location_level
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: user
  dtm: event_date

seller_item_active:
  metric_configs: [seller_item_active]
  connections: [vertica, trino]
  sql: seller_item_active
  column_map:
    item: item_id
    user: user_id
  dimensions:
    - platform
    - vertical
    - logical_category
    - category
    - subcategory
    - param1
    - param2
    - param3
    - param4
    - region
    - city
    - location_group
    - population_group
    - location_level
    - is_asd
    - user_segment_market
    - logical_param1
    - logical_param2
    - condition
    - asd_user_group
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

seller_item_event:
  metric_configs: [seller_item_event]
  connections: [vertica, trino]
  sql: seller_item_event
  column_map:
    item: item_id
    user: user_id
  dimensions:
    - platform
    - vertical
    - logical_category
    - category
    - subcategory
    - param1
    - param2
    - param3
    - param4
    - region
    - city
    - location_group
    - population_group
    - location_level
    - is_asd
    - user_segment_market
    - location
    - microcat
    - logical_param1
    - logical_param2
    - condition
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

geo_loc_change:
  metric_configs: [geo_loc_change]
  connections: [vertica, trino]
  sql: geo_loc_change
  column_map:
    cookie: cookie_id
    session: session_no
  dimensions:
    - platform
    - vertical
    - logical_category
    - category
    - subcategory
    - param1
    - param2
    - param3
    - param4
    - region
    - city
    - location_group
    - population_group
    - location_level
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

geo_map_stream:
  metric_configs: [geo_map_stream]
  connections: [vertica, trino]
  sql: geo_map_stream
  column_map:
    session: session_no
    cookie: cookie_id
  dimensions:
    - platform
    - vertical
    - logical_category
    - category
    - subcategory
    - param1
    - param2
    - param3
    - param4
    - region
    - city
    - location_group
    - population_group
    - location_level
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

perf_mobile:
  metric_configs: [perf_mobile]
  connections: [vertica, trino]
  sql: perf_mobile
  dimensions:
    [platform, network_type, is_core_content, screen_name, content_type, vertical]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: observation_date

perf_content_sli:
  metric_configs: [perf_content_sli]
  connections: [vertica, trino]
  sql: performance_requests_sli
  dimensions: [platform]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

perf_resources:
  metric_configs: [perf_resources]
  connections: [vertica, trino]
  sql: perf_resources
  dimensions: [platform, screen_name]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

perf_mobile_apps_startup_times:
  metric_configs: [perf_mobile_apps_startup_times]
  connections: [vertica, trino]
  sql: perf_mobile_apps_startup_times
  dimensions: [platform]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

perf_mobile_memory_warnings:
  metric_configs: [perf_mobile_memory_warnings]
  connections: [vertica, trino]
  sql: perf_memory_warnings
  column_map:
    cookie: cookie_id
  dimensions: [platform, screen_name]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

perf_web:
  metric_configs: [perf_web]
  connections: [vertica, trino]
  sql: perf_web
  column_map:
    cookie: cookie_id
  dimensions: [platform, network_type, screen_name, stage_name]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: observation_date

core_contacts:
  metric_configs: [core_contacts]
  column_map:
    cookie: cookie_id
  connections: [vertica, trino]
  sql: core_contacts
  dimensions:
    [
      platform,
      vertical,
      logical_category,
      logical_param1,
      logical_param2,
      category,
      subcategory,
      param1,
      region,
      city,
      location_group,
      population_group,
      location_level,
      price_group,
      is_asd,
      user_segment_market,
      asd_user_group,
    ]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

core_contact_user:
  metric_configs: [core_contact_user]
  column_map:
    user: user_id
  connections: [vertica]
  sql: core_contacts
  dimensions:
    [
      platform,
      vertical,
      logical_category,
      logical_param1,
      logical_param2,
      category,
      subcategory,
      param1,
      region,
      city,
      location_group,
      population_group,
      location_level,
      price_group,
      is_asd,
      user_segment_market,
      asd_user_group,
    ]
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

advert_funnel:
  metric_configs: [advert_funnel]
  column_map:
    session: session_hash
  connections: [vertica, trino]
  sql: advert_funnel
  dimensions: [platform, category, subcategory, vertical, logical_category]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

user_rating:
  metric_configs: [user_rating]
  connections: [vertica, trino]
  sql: user_rating
  dimensions: [vertical, logical_category]
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

str:
  metric_configs: [str]
  connections: [vertica, trino]
  sql: str
  column_map:
    user: user_id
  dimensions:
    [
      platform,
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      location_group,
      population_group,
      location_level,
    ]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: user
  dtm: event_date

str_by_cookies:
  metric_configs: [str_by_cookies]
  connections: [vertica, trino]
  sql: str
  column_map:
    participant: participant_id
  dimensions:
    [
      platform,
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      location_group,
      population_group,
      location_level,
    ]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

public_profile:
  metric_configs: [public_profile]
  connections: [vertica, trino]
  sql: public_profile
  column_map:
    cookie: cookie_id
  dimensions: [platform]
  participant: { visitor: cookie_id }
  primary_subject: visitor
  dtm: event_date

mnz_vas:
  metric_configs: [mnz_vas]
  connections: [vertica]
  sql: mnz_vas
  column_map:
    user: user_id
  dimensions:
    [
      platform,
      page_from,
      vertical,
      category,
      subcategory,
      logical_category,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      location_group,
      population_group,
      location_level,
      is_asd,
      user_segment_market,
    ]
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

labor:
  metric_configs: [labor]
  connections: [vertica, trino]
  sql: labor
  column_map:
    cookie: cookie_id
    session: session_no
    participant: participant_id
  dimensions:
    [
      platform,
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
      param2,
      param3,
      param4,
    ]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

express_cv:
  metric_configs: [express_cv]
  connections: [vertica, trino]
  sql: express_cv
  dimensions: [platform]
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

delivery_orders_buyer:
  metric_configs: [delivery_orders_buyer]
  connections: [vertica, trino]
  sql: delivery_orders
  column_map:
    deliveryorder: deliveryorder_id
  dimensions:
    - platform
    - vertical
    - logical_category
    - logical_param1
    - logical_param2
    - category
    - subcategory
    - param1
    - param2
    - param3
    - param4
    - region
    - city
    - location_group
    - population_group
    - location_level
    - buyer_location
    - buyer_city
    - buyer_location_group
    - buyer_population_group
    - buyer_location_level
    - is_delivery_paid_new
    - is_delivery_accepted_new
    - delivery_workflow
    - delivery_service
    - is_intercity
    - user_segment_market
    - has_avito_bindings
    - is_cart
    - is_high_price
    - is_between_15k_and_20k_price
    - is_between_10k_and_15k_price
    - is_less_than_10k_price
    - return_within_14_days
    - b2c_wo_dbs
    - c2c_return_within_14_days
    - payment_flow
  participant: { user: buyer_id }
  primary_subject: user
  dtm: status_date

delivery_orders_seller:
  metric_configs: [delivery_orders_seller]
  connections: [vertica, trino]
  sql: delivery_orders
  dimensions:
    - platform
    - vertical
    - logical_category
    - category
    - subcategory
    - param1
    - param2
    - param3
    - param4
    - region
    - city
    - location_group
    - population_group
    - location_level
    - buyer_location
    - buyer_city
    - buyer_location_group
    - buyer_population_group
    - buyer_location_level
    - is_delivery_paid_new
    - is_delivery_accepted_new
    - delivery_workflow
    - delivery_service
    - is_intercity
    - user_segment_market
    - is_cart
    - is_high_price
    - is_between_15k_and_20k_price
    - is_between_10k_and_15k_price
    - is_less_than_10k_price
    - return_within_14_days
    - b2c_wo_dbs
    - c2c_return_within_14_days
  participant: { user: seller_id }
  primary_subject: user
  dtm: status_date

billing:
  metric_configs: [billing]
  connections: [vertica, trino]
  sql: billing
  column_map:
    user: user_id
  dimensions: [platform]
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

session_source:
  metric_configs: [session_source]
  connections: [vertica, trino]
  sql: session_source
  column_map:
    cookie: cookie_id
  dimensions:
    - platform
    - vertical
    - logical_category
    - category
    - subcategory
    - param1
    - param2
    - param3
    - param4
    - region
    - city
    - location_group
    - population_group
    - location_level
  participant: { visitor: cookie_id }
  primary_subject: visitor
  dtm: event_date

support:
  metric_configs: [support]
  connections: [vertica, trino]
  sql: support
  column_map:
    participant: participant_id
  dimensions: [platform]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

support_hc:
  metric_configs: [support_hc]
  connections: [vertica]
  sql: support_hc_metrics
  column_map:
    participant: participant_id
  dimensions: [platform]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

support_crosschannel:
  metric_configs: [support_crosschannel]
  connections: [vertica, trino]
  sql: support_crosschannel
  column_map:
    participant: participant_id
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

cookie_account_enter:
  metric_configs: [cookie_account_enter]
  connections: [vertica, trino]
  sql: cookie_account_enter
  column_map:
    cookie: cookie_id
  dimensions: [platform]
  participant: { visitor: cookie_id }
  primary_subject: visitor
  dtm: event_date

favourite_sellers_totals:
  metric_configs: [favourite_sellers_totals]
  connections: [vertica]
  sql: favourite_sellers_totals
  column_map:
    user: user_id
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

communications:
  metric_configs: [communications]
  connections: [vertica, trino]
  sql: communications
  column_map:
    user: user_id
  dimensions:
    - vertical
    - logical_category
    - category
    - subcategory
    - param1
    - param2
    - param3
    - param4
    - region
    - city
    - location_group
    - population_group
    - location_level
    - phone_location_group
    - phone_population_group
    - phone_location_level
    - phone_city
    - phone_region
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

image:
  metric_configs: [image]
  connections: [vertica, trino]
  sql: perf_image_mobile
  column_map:
    participant: cookie_id
  dimensions: [platform, network_type, screen_name, content_type]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: observation_date

buyer_suggest:
  metric_configs: [buyer_suggest]
  connections: [vertica, trino]
  sql: buyer_suggest
  column_map:
    cookie: cookie_id
  dimensions:
    - platform
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

buyer_shortcut:
  metric_configs: [buyer_shortcut]
  connections: [vertica, trino]
  sql: buyer_shortcut
  column_map:
    cookie: cookie_id
  dimensions:
    - platform
    - category
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

buyer_filter:
  metric_configs: [buyer_filter]
  connections: [vertica, trino]
  sql: buyer_filter
  column_map:
    cookie: cookie_id
  dimensions:
    - platform
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

story_delay:
  metric_configs: [story_delay]
  connections: [vertica]
  sql: story_delay
  column_map:
    cookie: cookie_id
  dimensions:
    - platform
  participant: { visitor: cookie_id }
  primary_subject: visitor
  dtm: event_date

weighted_buyer:
  metric_configs: [weighted_buyer]
  connections: [vertica, trino]
  sql: weighted_buyer_metric
  column_map:
    cookie: cookie_id
    user: user_id
  dimensions:
    - platform
    - vertical
    - logical_category
    - user_segment_market
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

seller_item_add:
  metric_configs: [seller_item_add]
  connections: [vertica]
  sql: seller_item_add
  column_map:
    cookie: cookie_id
    user: user_id
  dimensions:
    - platform
    - vertical
    - logical_category
    - user_segment_market
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

seller_item_add_finish:
  metric_configs: [seller_item_add_finish]
  connections: [vertica]
  sql: seller_item_add
  column_map:
    cookie: cookie_id
    user: user_id
  dimensions:
    - platform
    - vertical
    - logical_category
    - microcat
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: item_create_date

geo_map_labor:
  metric_configs: [geo_map_labor]
  connections: [vertica]
  sql: geo_map_labor
  column_map:
    participant: participant_id
  dimensions:
    - platform
    - param1
    - param2
    - param3
    - param4
    - region
    - city
    - location_group
    - population_group
    - location_level
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_Date

buyer_call:
  metric_configs: [buyer_call]
  connections: [vertica, trino]
  sql: buyer_call
  column_map:
    item: item_id
    participant: participant_id
  dimensions:
    [
      platform,
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      population_group,
      user_segment_market,
    ]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

seller_matched_call:
  metric_configs: [seller_matched_call]
  connections: [vertica, trino]
  sql: seller_matched_call
  column_map:
    item: item_id
    user: user_id
  dimensions:
    [
      platform,
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      population_group,
    ]
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

notification:
  metric_configs: [notification]
  connections: [vertica, trino]
  sql: notification
  column_map:
    cookie: cookie_id
    user: user_id
  dimensions: [platform]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: user
  dtm: event_date

notification_availability:
  metric_configs: [notification_availability]
  connections: [vertica, trino]
  sql: crm_notification_settings_by_user
  column_map:
    participant: user_id
  dimensions:
    - vertical
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

calltracking:
  metric_configs: [calltracking]
  connections: [vertica, trino]
  sql: calltracking
  column_map:
    user: user_id
  dimensions:
    - vertical
    - region
    - city
    - location_group
    - population_group
    - location_level
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

app_call_bx:
  metric_configs: []
  connections: [vertica, trino]
  sql: app_call_buyer
  column_map:
    item: item_id
    cookie: cookie_id
    user: user_id
  dimensions:
    [
      platform,
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      population_group,
    ]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

app_call_sx:
  metric_configs: []
  connections: [vertica]
  sql: app_call_seller
  column_map:
    item: item_id
    cookie: cookie_id
    user: user_id
  dimensions:
    [
      platform,
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      population_group,
    ]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

app_call_event:
  metric_configs: [app_call_event]
  connections: [vertica]
  sql: app_call_event
  column_map:
    item: item_id
    cookie: cookie_id
    user: user_id
  dimensions:
    [
      platform,
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      population_group,
    ]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

app_call_seller_event:
  metric_configs: [app_call_seller_event]
  connections: [vertica, trino]
  sql: app_call_seller_event
  column_map:
    item: item_id
    cookie: cookie_id
    user: user_id
  dimensions:
    [
      platform,
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      population_group,
    ]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

fraud_support_tickets:
  metric_configs: [fraud_support_tickets]
  connections: [vertica, trino]
  sql: fraud_support_tickets
  column_map:
    cookie: cookie_id
  dimensions:
    - vertical
    - logical_category
    - category
    - subcategory
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: create_date

autoteka_stream:
  metric_configs: [autoteka_stream]
  connections: [vertica, trino]
  sql: autoteka_stream
  dimensions:
    [
      platform,
      payment_method,
      reports_count,
      searchtype,
      is_authorized,
      is_new_user,
      is_pro,
      vertical,
      logical_category,
    ]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

geo_coordinates_stream:
  metric_configs: [geo_coordinates_stream]
  connections: [vertica]
  sql: coordinates_stream
  column_map:
    cookie: cookie_id
  dimensions:
    - platform
    - location_group
    - population_group
    - location_level
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

geo_laas_backend:
  metric_configs: [geo_laas_backend]
  connections: [vertica, trino]
  sql: laas_stream
  column_map:
    cookie: cookie_id
  dimensions:
    - platform
    - location_group
    - population_group
    - location_level
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

listing_fees:
  metric_configs: [listing_fees]
  connections: [vertica]
  sql: listing_fees
  column_map:
    user: user_id
  dimensions:
    - tariff_type
    - tariff_subtype
    - vertical
    - logical_category
    - user_segment_market
    - is_asd
    - region
    - city
    - location_group
    - population_group
    - location_level
    - logical_param1
    - logical_param2
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

tariff_transactions:
  metric_configs: [tariff_transactions]
  connections: [vertica]
  sql: lf_metrics_transactions
  column_map:
    user: user_id
  dimensions:
    - tariff_type
    - tariff_subtype
    - vertical
    - logical_category
    - user_segment_market
    - is_asd
    - region
    - city
    - location_group
    - population_group
    - location_level
    - platform
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

tariff_funnel:
  metric_configs: [tariff_funnel]
  connections: [vertica]
  sql: tariff_metrics_funnel
  column_map:
    user: user_id
  dimensions:
    - user_segment_market
    - platform
    - vertical
    - logical_category
    - category
    - subcategory
    - param1
    - param2
    - param3
    - param4
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

cpx_tariff_funnel:
  metric_configs: [cpx_tariff_funnel]
  connections: [vertica]
  sql: cpx_tariff_funnel
  column_map:
    user: user_id
  dimensions:
    - user_segment_market
    - platform
    - vertical
    - logical_category
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date


time_to_interview_for_job_seeker:
  metric_configs: [time_to_interview_for_job_seeker]
  connections: [vertica]
  sql: time_to_interview
  column_map:
    user: job_seeker_user_id
  dimensions:
    - platform
  participant: { user: job_seeker_user_id }
  primary_subject: user
  dtm: event_time

time_to_interview_for_job_employer:
  metric_configs: [time_to_interview_for_job_employer]
  connections: [vertica]
  sql: time_to_interview
  column_map:
    user: job_employer_user_id
  dimensions:
    - platform
  participant: { user: job_employer_user_id }
  primary_subject: user
  dtm: event_time

search_items:
  metric_configs: [search_items]
  connections: [vertica, trino]
  sql: search_items
  column_map:
    cookie: cookie_id
  dimensions:
    - platform
    - vertical
    - logical_category
    - category
    - subcategory
    - region
  participant: { visitor: cookie_id }
  primary_subject: visitor
  dtm: event_date

search_items_engines:
  metric_configs: [search_items_engines]
  connections: [vertica]
  sql: search_items_engines
  column_map:
    cookie: cookie_id
  dimensions:
    - platform
    - vertical
    - logical_category
    - category
    - subcategory
    - region
  participant: { visitor: cookie_id }
  primary_subject: visitor
  dtm: event_date

production_errors:
  metric_configs: [production_errors]
  connections: [vertica, trino]
  sql: production_errors
  column_map:
    cookie: cookie_id
  dimensions:
    - platform
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

geo_loc_suggest:
  metric_configs: [geo_loc_suggest]
  connections: [vertica, trino]
  sql: geo_loc_suggest
  column_map:
    cookie: cookie_id
  dimensions:
    - platform
    - location_group
    - population_group
    - location_level
  participant: { visitor: cookie_id }
  primary_subject: visitor
  dtm: event_date

clickstream:
  metric_configs: [clickstream]
  connections: [vertica]
  sql: clickstream
  column_map:
    cookie: cookie_id
  dimensions:
    [
      platform,
      vertical,
      logical_category,
      category,
      region,
      city,
      location_group,
      population_group,
      location_level,
      subcategory,
      param1,
      param2,
      param3,
      param4,
    ]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

clickstream_counters:
  metric_configs: [clickstream_counters]
  connections: [vertica, trino]
  sql: clickstream_counters
  column_map:
    cookie: cookie_id
    user:   user_id
    chat:   msg_chat
  dimensions:
    [
      platform,
      vertical,
      logical_category,
      category,
      region,
      city,
      location_group,
      population_group,
      location_level,
      subcategory,
      param1,
      param2,
      param3,
      param4,
    ]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

messenger_stream:
  metric_configs: [messenger_stream]
  connections: [vertica]
  sql: messenger_stream
  column_map:
    cookie: cookie_id
    user: user_id
  dimensions:
    [
      platform,
      vertical,
      category,
      subcategory,
      logical_category,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      location_group,
      population_group,
      location_level,
      is_asd,
      user_segment_market,
    ]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: user
  dtm: event_date

clickstream_sparse.clickhouse:
  connections: [clickhouse]
  sql: clickstream_sparse
  column_map:
    platform_id: business_platform
    cookie: u
    item: iid
    x_eid: __x_eid
    q: __x_q
    engine: _x__engine
    item_x_type: 0
    event_count: 1
    network_error_type: ios_network_error_type
    network_error_sub_type: ios_network_error_subtype
  dtm: event_date
  participant: { visitor: u, user: uid }
  primary_subject: visitor
  metric_configs: [clickstream_sparse]
  metrics:
    - bt_clicks
    - bt_clicks_grouped
    - buyers
    - contacts
    - contacts_grouped
    - user_pv
    - users_bt_click_daily
    - users_first_messages
    - fatal_app_errors
    - users_fatal_app_errors
    - users_item_view_daily
    - items_added
    - sellers_daily
    - user_btc_rec_u2i
    - users_item_view_rec_u2i
    - call_phones
    - fps_falls_below_10pct
    - fps_falls_below_30pct
    - fps_falls_below_50pct
    - fps_falls_below_70pct
    - fps_falls_below_85pct
    - fps_falls_below_90pct
    - fps_falls_below_95pct
    - users_fps_falls_below_10pct
    - users_fps_falls_below_30pct
    - users_fps_falls_below_50pct
    - users_fps_falls_below_70pct
    - users_fps_falls_below_85pct
    - users_fps_falls_below_90pct
    - users_fps_falls_below_95pct
    - users_buyer_target_click_serp_daily
    - users_buyer_target_click_rec_daily
    - users_search
    - buyer_target_clicks_serp
    - buyer_target_clicks_rec
    - users_contact_serp_daily
    - searches_serp
    - searches
    - contacts
    - item_views
    - search_btc
    - searches_contact_serp
    - user_btc_sq
    - search_q
    - user_sq
    - sq_c
    - users_contact_search_query
    - buyer_target_clicks_rec_i2i
    - users_contact_rec_i2i

messenger_blocks:
  metric_configs: [messenger_blocks]
  connections: [vertica]
  sql: messenger_blocks
  column_map:
    user: user_id
    chat: chat_Id
  dimensions:
    [
      platform,
      vertical,
      category,
      subcategory,
      logical_category,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      location_group,
      population_group,
      location_level,
      is_asd,
      user_segment_market,
    ]
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

messenger_response_messages:
  metric_configs: [messenger_response_messages]
  connections: [vertica]
  sql: messenger_chat_report
  column_map:
    user: user_id
    platform_id: reply_platform_id
  dimensions:
    [
      platform,
      vertical,
      category,
      subcategory,
      logical_category,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      location_group,
      population_group,
      location_level,
      is_asd,
      user_segment_market,
    ]
  participant: { user: user_id }
  primary_subject: user
  dtm: reply_time

messenger_answered_inbox_messages:
  metric_configs: [messenger_answered_inbox_messages]
  connections: [vertica]
  sql: messenger_chat_report
  column_map:
    user: user_id
    platform_id: reply_platform_id
  dimensions:
    [
      platform,
      vertical,
      category,
      subcategory,
      logical_category,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      location_group,
      population_group,
      location_level,
      is_asd,
      user_segment_market,
    ]
  participant: { user: user_id }
  primary_subject: user
  dtm: first_message_event_date

messenger_answered_messages:
  metric_configs: [messenger_answered_messages]
  connections: [vertica]
  sql: messenger_chat_report
  column_map:
    user: first_message_user_id
  dimensions:
    [
      platform,
      vertical,
      category,
      subcategory,
      logical_category,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      location_group,
      population_group,
      location_level,
      is_asd,
      user_segment_market,
    ]
  participant: { visitor: first_message_cookie_id, user: first_message_user_id }
  primary_subject: visitor
  dtm: first_message_event_date

messenger_inbox_messages:
  metric_configs: [messenger_inbox_messages]
  connections: [vertica]
  sql: messenger_chat_report
  column_map:
    user: user_id
  dimensions:
    [
      vertical,
      category,
      subcategory,
      logical_category,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      location_group,
      population_group,
      location_level,
      is_asd,
      user_segment_market,
    ]
  participant: { user: user_id }
  primary_subject: user
  dtm: first_message_event_date

messenger_messages:
  metric_configs: [messenger_messages]
  connections: [vertica]
  sql: messenger_messages
  column_map:
    user: user_id
    message: message_id
    chat: chat_id
  dimensions:
    [
      platform,
      vertical,
      category,
      subcategory,
      logical_category,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      location_group,
      population_group,
      location_level,
    ]
  participant: { visitor: from_cookie_id, user: user_id }
  primary_subject: user
  dtm: event_date

messenger_active_chats:
  metric_configs: [messenger_active_chats]
  connections: [vertica]
  sql: messenger_messages
  column_map:
    chat: chat_id
  dimensions:
    [
      vertical,
      category,
      subcategory,
      logical_category,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      location_group,
      population_group,
      location_level,
    ]
  participant: { user: zero }
  primary_subject: user
  dtm: event_date

clickstream_antibot:
  metric_configs: [clickstream_antibot]
  connections: [vertica, trino]
  sql: clickstream_antibot
  column_map:
    cookie: cookie_id
  dimensions: [platform, vertical, category, app_version]
  dtm: event_date
  participant: { visitor: cookie_id }
  primary_subject: visitor

credit_broker:
  metric_configs: [credit_broker]
  connections: [vertica]
  sql: broker_full_events
  column_map:
    cookie: cookie_id
  dimensions: [platform, vertical, logical_category, location]
  dtm: event_date
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor

credit_broker_revenue:
  metric_configs: [credit_broker_revenue]
  connections: [vertica, trino]
  sql: broker_events_revenue
  column_map:
    cookie: cookie_id
  dimensions: [platform, vertical, logical_category, location]
  dtm: issued_date
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor

classified_revenue:
  metric_configs: [classified_revenue]
  connections: [vertica, trino]
  sql: classified_revenue
  column_map:
    user: user_id
  dimensions:
    [
      vertical,
      logical_category,
      logical_param1,
      logical_param2,
      location,
      region,
      city,
      location_group,
      location_level,
      is_asd,
      user_segment_market,
      condition,
      asd_user_group,
    ]
  dtm: event_date
  participant: { user: user_id }
  primary_subject: user

other_projects_revenue:
  metric_configs: [other_projects_revenue]
  connections: [vertica, trino]
  sql: other_projects_revenue
  dimensions: [vertical]
  participant: { user: user_id }
  primary_subject: user
  dtm: observation_date

total_revenue:
  metric_configs: [total_revenue]
  connections: [vertica, trino]
  sql: total_revenue
  dimensions: [vertical]
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

delivery_user_toggle:
  metric_configs: [delivery_user_toggle]
  connections: [vertica, trino]
  sql: user_isDeliveryActive
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

autoteka_stream_autoteka_participant:
  metric_configs: [autoteka_stream_autoteka_participant]
  connections: [vertica, trino]
  sql: autoteka_stream
  column_map:
    platform_id: autoteka_platform_id
  dimensions:
    [
      platform,
      payment_method,
      reports_count,
      searchtype,
      is_authorized,
      is_new_user,
      is_pro,
      vertical,
      logical_category,
    ]
  participant:
    { autoteka_visitor: autoteka_cookie_id, autoteka_user: autotekauser_id }
  primary_subject: autoteka_visitor
  dtm: event_date

reviews:
  metric_configs: [reviews]
  connections: [vertica, trino]
  sql: reviews
  column_map:
    cookie: cookie_id
    user: user_id
  dimensions:
    [
      platform,
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      location_group,
      population_group,
      location_level,
    ]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

reviews_collected:
  metric_configs: [reviews_collected]
  connections: [vertica, trino]
  sql: reviews
  column_map:
    user: seller_id
  dimensions:
    [
      platform,
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      location_group,
      population_group,
      location_level,
    ]
  participant: { user: seller_id }
  primary_subject: user
  dtm: event_date

contacts_reviews_services:
  metric_configs: [seller_contacts_reviews_services]
  connections: [vertica]
  sql: contacts_reviews_services
  column_map:
    user: user_id
  dimensions:
    [
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      location_group,
      population_group,
      location_level,
    ]
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

lister_reactivations:
  metric_configs: [lister_reactivations]
  connections: [vertica]
  sql: lister_reactivations
  dimensions: [logical_category, vertical, region, city]
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

buyer_items_distance:
  metric_configs: [buyers_items_distance]
  connections: [vertica]
  sql: buyers_items_distance
  column_map:
    cookie: cookie_id
  dimensions:
    - platform
    - vertical
    - logical_category
    - category
    - region
    - city
    - location_group
    - population_group
    - location_level
  participant: { visitor: cookie_id }
  primary_subject: visitor
  dtm: event_date

chatbot_metrics_start:
  metric_configs: [chatbot_metrics_start]
  connections: [vertica]
  sql: chatbot_metrics
  column_map:
    user: user_id
    flow: flow_id
    chat: chat_id
    flow_run: flowrun_id
  dimensions:
    - vertical
    - logical_category
  participant: { user: user_id }
  primary_subject: user
  dtm: start_flow_time

chatbot_metrics_end:
  metric_configs: [chatbot_metrics_end]
  connections: [vertica]
  sql: chatbot_metrics
  column_map:
    user: user_id
    flow: flow_id
    chat: chat_id
    flow_run: flowrun_id
  dimensions:
    - vertical
    - logical_category
  participant: { user: user_id }
  primary_subject: user
  dtm: end_flow_time

verified_users:
  metric_configs: [verified_users]
  connections: [vertica, trino]
  sql: verification_statuses
  column_map:
    user: user_id
  participant: { user: user_id }
  primary_subject: user
  dtm: event_time

rating_stream:
  metric_configs: [rating_stream]
  connections: [vertica, trino]
  sql: rating_stream
  column_map:
    cookie: cookie_id
    user: user_id
  dimensions:
    [
      platform,
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      location_group,
      population_group,
      location_level,
    ]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

rating_search_stream:
  metric_configs: [rating_search_stream]
  connections: [vertica]
  sql: rating_search_stream
  column_map:
    cookie: cookie_id
    user: user_id
  dimensions:
    [
      platform,
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      location_group,
      population_group,
      location_level,
    ]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

model_rating_stream:
  metric_configs: [model_rating_stream]
  connections: [vertica, trino]
  sql: model_rating_stream
  column_map:
    cookie: cookie_id
    user: user_id
  dimensions:
    [
      platform,
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      location_group,
      population_group,
      location_level,
    ]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

videocalls_stream:
  metric_configs: [videocalls_stream]
  connections: [vertica]
  sql: videocalls_stream
  column_map:
    item: item_id
    cookie: cookie_id
    user: user_id
  dimensions:
    [
      platform,
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      population_group,
    ]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

msh_banned_contacts:
  metric_configs: [msh_banned_contacts]
  connections: [vertica, trino]
  sql: msh_banned_contacts
  column_map:
    item: item_id
    user: user_id
  dimensions:
    - vertical
    - logical_category
    - category
    - subcategory
    - param1
    - param2
    - param3
    - param4
    - region
    - city
    - location_group
    - population_group
    - location_level
    - logical_param1
    - logical_param2
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

chatbot_events:
  metric_configs: [chatbot_events]
  connections: [vertica]
  sql: chatbot_events
  column_map:
    user: user_id
    flow: flow_id
    chat: chat_id
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

autoload_package_info:
  metric_configs: [autoload_package_info]
  connections: [vertica]
  sql: autoload_feed_item_flow
  column_map:
    user: user_id
    category: category_name
    subcategory: subcategory_name
  dimensions:
    - vertical
    - logical_category
    - category
    - subcategory
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

user_cohort:
  metric_configs: [user_cohort]
  connections: [vertica, trino]
  sql: user_cohort
  dimensions: [vertical, logical_category, region, city, category, subcategory]
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

autoteka_funnel:
  metric_configs: [autoteka_funnel]
  connections: [vertica]
  sql: autoteka_funnel_main
  dimensions:
    [platform, is_pro, is_main_page_session, searchtype, is_session_to_exclude]
  participant: { autoteka_visitor: autoteka_cookie_id }
  primary_subject: autoteka_visitor
  dtm: event_date

autoteka_reports:
  metric_configs: [autoteka_reports]
  connections: [vertica, trino]
  sql: autoteka_reports
  dimensions:
    [
      autoteka_car_age_group,
      autoteka_car_price_group,
      autoteka_mileage_group,
      vertical,
      logical_category,
      region,
      city,
      platform,
      reports_count,
      searchtype,
      is_new_user,
      is_pro,
    ]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: autoteka_package_history_created_at

buyer_confirmation_deals:
  metric_configs: [buyer_confirmation_deals]
  connections: [vertica]
  sql: confirmation_deals
  column_map:
    item: item_id
    user: buyer_id
    chat: chat_id
  dimensions:
    - vertical
    - logical_category
    - category
    - subcategory
    - param1
    - param2
    - param3
    - param4
    - region
    - city
    - location_group
    - population_group
    - location_level
  participant: { user: buyer_id }
  primary_subject: user
  dtm: event_time

seller_confirmation_deals:
  metric_configs: [seller_confirmation_deals]
  connections: [vertica]
  sql: confirmation_deals
  column_map:
    item: item_id
    user: seller_id
    chat: chat_id
  dimensions:
    - vertical
    - logical_category
    - category
    - subcategory
    - param1
    - param2
    - param3
    - param4
    - region
    - city
    - location_group
    - population_group
    - location_level
  participant: { user: seller_id }
  primary_subject: user
  dtm: event_time

autoteka_reports_autoteka_participant:
  metric_configs: [autoteka_reports_autoteka_participant]
  connections: [vertica, trino]
  sql: autoteka_reports
  column_map:
    platform_id: autoteka_platform_id
  dimensions:
    [
      autoteka_car_age_group,
      autoteka_car_price_group,
      autoteka_mileage_group,
      vertical,
      logical_category,
      region,
      city,
      platform,
      reports_count,
      searchtype,
      is_new_user,
      is_pro,
    ]
  participant:
    { autoteka_visitor: autoteka_cookie_id, autoteka_user: autoteka_user_id }
  primary_subject: autoteka_visitor
  dtm: autoteka_package_history_created_at

re_nd_buyer_stream:
  metric_configs: [re_nd_buyer_stream]
  connections: [vertica, trino]
  sql: re_nd_buyer_stream
  column_map:
    item: item_id
    cookie: cookie_id
    user: user_id
  dimensions:
    - platform
    - vertical
    - logical_category
    - category
    - subcategory
    - region
    - city
    - location_group
    - population_group
    - location_level
    - location
    - microcat
    - is_human
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

autoteka_new_buyer_expected_revenue_ap:
  metric_configs: [autoteka_new_buyer_expected_revenue_ap]
  connections: [vertica]
  sql: autoteka_new_buyers_expected_revenue
  dimensions: [platform, searchtype]
  participant:
    { autoteka_visitor: autoteka_cookie_id, autoteka_user: autotekauser_Id }
  primary_subject: autoteka_visitor
  dtm: event_date

autoteka_new_buyer_expected_revenue:
  metric_configs: [autoteka_new_buyer_expected_revenue]
  connections: [vertica]
  sql: autoteka_new_buyers_expected_revenue
  dimensions: [platform, searchtype]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

messenger_transitions:
  metric_configs: [messenger_transitions]
  connections: [vertica]
  sql: messenger_transitions
  column_map:
    user: user_id
  dimensions:
    [
      vertical,
      category,
      subcategory,
      logical_category,
      param1,
      param2,
      param3,
      param4,
      is_asd,
      user_segment_market,
    ]
  participant: { user: user_id }
  primary_subject: user
  dtm: trigger_date

contact_deal:
  metric_configs: [contact_deal]
  connections: [vertica]
  sql: contact_deal
  column_map:
    cookie: cookie_id
    user: user_id
  dimensions:
    [
      platform,
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
    ]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

contact_deal_weight:
  metric_configs: [contact_deal_weight]
  connections: [vertica]
  sql: contact_deal_weight
  column_map:
    cookie: cookie_id
  dimensions:
    [
      platform,
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
    ]
  participant: { visitor: cookie_id }
  primary_subject: visitor
  dtm: event_date

contact_deal_user:
  metric_configs: [contact_deal_user]
  connections: [vertica]
  sql: contact_deal
  column_map:
    cookie: cookie_id
    user: user_id
  dimensions:
    [
      platform,
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
    ]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: user
  dtm: event_date

bs_first_click:
  metric_configs: [bs_first_click]
  connections: [vertica, trino]
  sql: bs_first_click
  column_map:
    cookie: cookie_id
  dimensions: [platform, vertical, logical_category]
  participant: { visitor: cookie_id }
  primary_subject: visitor
  dtm: event_date

first_position_click:
  metric_configs: [first_position_click]
  connections: [vertica, trino]
  sql: first_position_click
  column_map:
    cookie: cookie_id
  dimensions: [platform]
  participant: { visitor: cookie_id }
  primary_subject: visitor
  dtm: event_date

cpa_calls_metrics:
  metric_configs: [cpa_calls_metrics]
  connections: [vertica]
  sql: cpa_calls_metrics
  column_map:
    user: user_id
  dimensions:
    [
      vertical,
      logical_category,
      logical_param1,
      logical_param2,
      location,
      region,
      city,
      location_group,
      location_level,
      is_asd,
      user_segment_market,
    ]
  dtm: event_date
  participant: { user: user_id }
  primary_subject: user

new_pro_listers:
  metric_configs: [new_pro_listers]
  connections: [vertica]
  sql: new_pro_listers
  column_map:
    user: user_id
  dimensions: [vertical, logical_category, is_asd, user_segment_market]
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

gmv_deals_proxy:
  metric_configs: [gmv_deals_proxy]
  connections: [vertica, trino]
  sql: gmv_deals_proxy
  column_map:
    user: user_id
    item: item_id
  dimensions:
    [
      vertical,
      logical_category,
      region,
      city,
      category,
      subcategory,
      is_asd,
      user_segment_market,
    ]
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

performance_fps:
  metric_configs: [performance_fps]
  connections: [vertica, trino]
  sql: performance_fps
  column_map:
    cookie: cookie_id
  dimensions:
    - platform
    - screen_name
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

sphinx_cputime:
  metric_configs: [sphinx_cputime]
  connections: [vertica, trino]
  sql: sphinx_cpu
  column_map:
    cookie: cookie_id
  dimensions:
    - platform
    - sphinx_context
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

action_returned:
  metric_configs: [action_returned]
  connections: [vertica, trino]
  sql: action_returned
  column_map:
    cookie: cookie_id
    user: user_id
  dimensions:
    - platform
    - vertical
    - logical_category
    - region
    - city
    - location_group
    - population_group
    - location_level
    - location
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

callback_calls:
  metric_configs: [callback_calls]
  connections: [vertica]
  sql: recallme_calls
  column_map:
    cookie: cookie_id
  dimensions:
    [
      platform,
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      population_group,
    ]
  participant: { visitor: cookie_id }
  primary_subject: visitor
  dtm: event_date

perf_video_metrics:
  metric_configs: [perf_video_metrics]
  connections: [vertica, trino]
  sql: perf_video_metrics
  column_map:
    cookie: cookie_id
    user: user_id
  dimensions:
    - platform
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

perf_queried_hosts_durations:
  metric_configs: [perf_queried_hosts_durations]
  connections: [vertica, trino]
  sql: perf_queried_hosts_durations
  column_map:
    cookie: cookie_id
    user: user_id
  dimensions:
    - platform
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

short_rent_item_trx:
  metric_configs: [short_rent_item_trx]
  connections: [vertica]
  sql: short_rent_item_trx
  column_map:
    item: item_id
    user: user_id
  dimensions:
    - platform
    - vertical
    - logical_category
    - category
    - subcategory
    - region
    - is_asd
    - user_segment_market
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

deal_confirmed:
  metric_configs: [deal_confirmed]
  connections: [vertica]
  sql: confirmed_deals
  column_map:
    item: item_id
    user: user_id
  dimensions:
    - vertical
    - logical_category
    - category
    - subcategory
    - is_asd
    - user_segment_market
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

sbc_special_offers:
  metric_configs: [sbc_special_offers]
  connections: [vertica]
  sql: seller_buyer_communication
  column_map:
    user: user_id
    platform_id: platform_id
  dimensions:
    [
      platform,
      vertical,
      category,
      subcategory,
      logical_category,
      param1,
      param2,
      param3,
      param4,
      is_asd,
      user_segment_market,
    ]
  participant: { user: user_id }
  primary_subject: user
  dtm: discount_send_date

sbc_answered_special_offers:
  metric_configs: [sbc_answered_special_offers]
  connections: [vertica]
  sql: seller_buyer_communication
  column_map:
    user: user_id
  dimensions:
    [
      vertical,
      category,
      subcategory,
      logical_category,
      param1,
      param2,
      param3,
      param4,
      is_asd,
      user_segment_market,
    ]
  participant: { user: user_id }
  primary_subject: user
  dtm: discount_send_date

sbc_inbox_special_offers:
  metric_configs: [sbc_inbox_special_offers]
  connections: [vertica]
  sql: seller_buyer_communication
  column_map:
    user: buyer_id
  dimensions:
    [
      vertical,
      category,
      subcategory,
      logical_category,
      param1,
      param2,
      param3,
      param4,
    ]
  participant: { user: buyer_id }
  primary_subject: user
  dtm: discount_send_date

sbc_answered_inbox_special_offers:
  metric_configs: [sbc_answered_inbox_special_offers]
  connections: [vertica]
  sql: seller_buyer_communication
  column_map:
    user: buyer_id
    platform_id: answer_platform
  dimensions:
    [
      vertical,
      category,
      subcategory,
      logical_category,
      param1,
      param2,
      param3,
      param4,
    ]
  participant: { user: buyer_id }
  primary_subject: user
  dtm: answer_time

perf_screen_memory_consumption:
  metric_configs: [perf_screen_memory_consumption]
  connections: [vertica, trino]
  sql: perf_screen_memory_consumption
  column_map:
    cookie: cookie_id
    user: user_id
  dimensions: [platform, screen_name]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

sx_jobs_candidates:
  metric_configs: [sx_jobs_candidates]
  connections: [vertica, trino]
  sql: sx_jobs_candidates
  column_map:
    user: user_id
  dimensions: [is_asd]
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

messages_reply_percentiles:
  metric_configs: [messages_reply_percentiles]
  connections: [vertica]
  sql: messages_reply_percentiles
  column_map:
    user: from_user_id
  dimensions: [vertical, logical_category, is_asd, platform, chat_role]
  participant: { user: from_user_id }
  primary_subject: user
  dtm: event_date

reviews_stream:
  metric_configs: [reviews_stream]
  connections: [vertica, trino]
  sql: reviews_stream
  column_map:
    cookie: cookie_id
    user: user_id
  dimensions: [platform]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

qd_lots_create_date:
  metric_configs: [qd_lots_create_date]
  connections: [vertica, trino]
  sql: qd_lots
  column_map:
    user: user_id
  dimensions:
    [
      platform,
      region,
      city,
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
    ]
  participant: { user: user_id }
  primary_subject: user
  dtm: created_at

qd_lots_terminated_date:
  metric_configs: [qd_lots_terminated_date]
  connections: [vertica, trino]
  sql: qd_lots
  column_map:
    user: user_id
  dimensions:
    [
      platform,
      region,
      city,
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
    ]
  participant: { user: user_id }
  primary_subject: user
  dtm: terminated_at

perf_clickstream_counters:
  metric_configs: [perf_clickstream_counters]
  connections: [vertica]
  sql: perf_click_stream_counters
  column_map:
    cookie: cookie_id
    user: user_id
  dimensions: [platform, screen_name]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

payment_page_trx:
  metric_configs: [payment_page_trx]
  connections: [vertica, trino]
  sql: payment_page_trx
  column_map:
    cookie: cookie_id
    user: user_id
  dimensions: [platform]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: user
  dtm: event_date

jobs_chatbot:
  metric_configs: [jobs_chatbot]
  connections: [vertica, trino]
  sql: jobs_chatbot_metrics
  column_map:
    user: user_id
  dimensions: [platform]
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

cart_stream:
  metric_configs: [cart_stream]
  connections: [vertica, trino]
  sql: cart_stream
  dimensions:
    - platform
    - vertical
    - logical_category
    - category
    - subcategory
    - param1
    - param2
    - param3
    - param4
    - is_intercity
    - is_asd
    - asd_user_group
    - buyer_location
    - buyer_region
    - buyer_city
    - buyer_location_group
    - buyer_location_level
    - buyer_population_group
    - location
    - region
    - city
    - location_group
    - population_group
    - location_level
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

jobs_chatbot_chats:
  metric_configs: [jobs_chatbot_chats]
  connections: [vertica]
  sql: jobs_chatbot_chats
  column_map:
    user: user_id
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

review_arbitrage:
  metric_configs: [review_arbitrage]
  connections: [vertica, trino]
  sql: review_arbitrage
  column_map:
    cookie: cookie_id
    user: user_id
  dimensions:
    [
      platform,
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      location_group,
      population_group,
      location_level,
    ]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

kmt_stream:
  metric_configs: [kmt]
  connections: [vertica]
  sql: kmt_stream
  column_map:
    cookie: cookie_id
    session: session_hash
  dimensions:
    - platform
    - vertical
    - logical_category
    - category
    - subcategory
    - param1
    - param2
    - param3
    - param4
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

payout_page_trx:
  metric_configs: [payout_page_trx]
  connections: [vertica]
  sql: payout_page_trx
  column_map:
    user: user_id
  dimensions: [platform]
  participant: { user: user_id }
  primary_subject: user
  dtm: create_date

payment_order_cost:
  metric_configs: [payment_order_cost]
  connections: [vertica]
  sql: payment_order_cost
  column_map:
    user: user_id
  dimensions:
    - platform
    - has_avito_bindings
    - is_delivery_paid_new
  participant: { user: user_id }
  primary_subject: user
  dtm: create_date

operating_model_asd_user:
  metric_configs: [operating_model_asd_user]
  connections: [vertica]
  sql: operating_model_asd_user
  column_map:
    user: user_id
  dimensions: [vertical, logical_category, user_segment_market]
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

operating_model_asd_revenue:
  metric_configs: [operating_model_asd_revenue]
  connections: [vertica]
  sql: operating_model_asd_revenue
  column_map:
    user: user_id
  dimensions: [vertical, logical_category, user_segment_market]
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

calendar_orders:
  metric_configs: [calendar_orders]
  connections: [vertica]
  sql: calendar_orders
  column_map:
    user: seller_id # 
    item: item_id
  dimensions:
    [
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
      param2,
      region,
      city,
      location_group,
      population_group,
      location_level,
    ]
  participant: { user: seller_id }
  primary_subject: user
  dtm: event_date

calendar_sellers_items:
  metric_configs: [calendar_sellers_items]
  connections: [vertica]
  sql: calendar_sellers_items
  column_map:
    user: user_id # 
    item: item_id
  dimensions:
    [
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
      param2,
      region,
      city,
      location_group,
      population_group,
      location_level,
    ]
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

calendar_orders_mp:
  metric_configs: [calendar_orders_mp]
  connections: [vertica]
  sql: calendar_orders_mp
  column_map:
    user: seller_id # 
    item: item_id
  dimensions:
    [
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
      param2,
      region,
      city,
      location_group,
      population_group,
      location_level,
    ]
  participant: { user: seller_id }
  primary_subject: user
  dtm: event_date

calendar_sellers_items_mp:
  metric_configs: [calendar_sellers_items_mp]
  connections: [vertica]
  sql: calendar_sellers_items_mp
  column_map:
    user: user_id # 
    item: item_id
  dimensions:
    [
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
      param2,
      region,
      city,
      location_group,
      population_group,
      location_level,
    ]
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

ux_feedback:
  metric_configs: [ux_feedback]
  connections: [vertica]
  sql: ux_feedback
  column_map:
    user: user_id
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

clickstream_data_platform:
  metric_configs: [clickstream_data_platform]
  connections: [vertica]
  sql: clickstream_data_platform
  participant: { user: user_hash }
  primary_subject: user
  dimensions: [ldap_user]
  dtm: event_date

clickstream_sigma_duration:
  metric_configs: [clickstream_sigma_duration]
  connections: [vertica]
  sql: clickstream_sigma_duration
  participant: { user: user_hash }
  primary_subject: user
  dimensions: [ldap_user]
  dtm: event_date

org_structure:
  metric_configs: [org_structure]
  connections: [vertica]
  sql: org_structure
  participant: { user: user_hash }
  primary_subject: user
  dimensions: [ldap_user]
  dtm: event_date

m42_usage:
  metric_configs: [m42_usage]
  connections: [vertica]
  sql: m42_usage
  participant: { user: user_hash }
  primary_subject: user
  dimensions: [ldap_user, picked_metric]
  dtm: event_date

sq_track_metrics:
  metric_configs: [sq_track_metrics]
  connections: [vertica, trino]
  sql: sq_track_metrics
  column_map:
    cookie: cookie_id
    item: item_id
  participant: { visitor: cookie_id }
  primary_subject: visitor
  dtm: event_date

all_communications_bx:
  metric_configs: [all_communications_bx, app_call_bx]
  connections: [vertica]
  sql: all_communications
  column_map:
    cookie: buyer_cookie_id
    user: buyer_id
  dimensions:
    [
      platform,
      vertical,
      category,
      subcategory,
      logical_category,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      location_group,
      population_group,
      location_level,
      user_segment_market,
    ]
  participant: { visitor: buyer_cookie_id, user: buyer_id }
  primary_subject: user
  dtm: event_date

all_communications_sx:
  metric_configs: [all_communications_sx, app_call_sx]
  connections: [vertica]
  sql: all_communications
  column_map:
    user: seller_id
    platform_id: seller_platform_id
  dimensions:
    [
      platform,
      vertical,
      category,
      subcategory,
      logical_category,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      location_group,
      population_group,
      location_level,
      is_asd,
      user_segment_market,
    ]
  participant: { user: seller_id }
  primary_subject: user
  dtm: event_date

mattermost_messages:
  metric_configs: [mattermost_messages]
  connections: [vertica]
  sql: mattermost_messages
  participant: { user: user_hash }
  primary_subject: user
  dimensions: [ldap_user]
  dtm: message_ts

passport_event_stream:
  metric_configs: [passport_event_stream]
  connections: [vertica, trino]
  sql: passport_event_stream
  dimensions: [platform]
  participant: { visitor: cookie_id, user: user_id, passport: passport_id }
  primary_subject: passport
  dtm: event_datetime

buyer_reviews_stream:
  metric_configs: [buyer_reviews_stream]
  connections: [vertica, trino]
  sql: buyer_reviews_stream
  column_map:
    cookie: cookie_id
    user: user_id
  dimensions: [platform]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

buyer_reviews:
  metric_configs: [buyer_reviews]
  connections: [vertica, trino]
  sql: buyer_reviews
  column_map:
    cookie: cookie_id
    user: user_id
  dimensions:
    [
      platform,
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
      param2,
      param3,
      param4,
      region,
      city,
      location_group,
      population_group,
      location_level,
    ]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

fraud_tickets_user_reported:
  metric_configs: [fraud_tickets_user_reported]
  connections: [vertica, trino]
  sql: fraud_tickets_user_reported
  column_map:
    user: user_id
  dimensions:
    [
      vertical,
      logical_category,
      category,
      subcategory,
    ]
  participant: { user: user_id }
  primary_subject: user
  dtm: create_date

item_abuses:
  metric_configs: [item_abuses]
  connections: [vertica]
  sql: item_abuses
  column_map:
    user: user_id
  dimensions:
    [
      platform,
      vertical,
      logical_category,
      category,
      subcategory,
    ]
  participant: { user: user_id }
  primary_subject: user
  dtm: abuse_date

hacked_metrics:
  metric_configs: [hacked_metrics]
  connections: [vertica, trino]
  sql: hacked_metrics
  dimensions: [platform]
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

user_address:
  metric_configs: [user_address]
  connections: [vertica, trino]
  sql: user_address
  dimensions:
        [
          platform,
          vertical,
          logical_category,
          region,
          city,
          location_group,
          population_group,
          location_level
        ]
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date
  column_map:
      user: user_id

active_pro_sellers:
  metric_configs: [active_pro_sellers]
  connections: [vertica]
  sql: active_pro_sellers
  column_map:
    user: user_id
  dimensions: [vertical, logical_category, user_segment_market]
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

passport_coverage_m42:
  metric_configs: [passport_coverage_m42]
  connections: [vertica]
  sql: passport_coverage_m42
  participant: { user: _ } # No participants in table, just value by date.
  primary_subject: user
  dtm: calc_date

clickstream_video:
  metric_configs: [clickstream_video]
  connections: [vertica, trino]
  sql: clickstream_video
  column_map:
    cookie: cookie_id
    user: user_id
  dimensions:
    [
      platform,
      vertical,
      logical_category,
      category,
      subcategory,
      param1,
      param2,
      param3,
      param4,
      condition,
    ]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

buyout_events:
  metric_configs: [buyout_events]
  connections: [vertica]
  sql: buyout_events
  column_map:
    user: user_id
    item: item_id
    user_segment_market: segment
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date

premium_fashion:
  metric_configs: [ premium_fashion ]
  connections: [vertica]
  sql: premium_fashion
  column_map:
    user: user_id
    item: item_id
    cookie: cookie_id
  dimensions:
    [
      platform
    ]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: user
  dtm: event_date


tab_bar_stream:
  metric_configs: [ tab_bar_stream ]
  connections: [vertica]
  sql: tab_bar_stream
  column_map:
    user: user_id
    cookie: cookie_id
  dimensions:
    [
      platform
    ]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date

autoteka_total:
  metric_configs: [autoteka_total]
  connections: [vertica, trino]
  sql: autoteka_stream
  dimensions:
    [
      platform,
      payment_method,
      reports_count,
      searchtype,
      is_authorized,
      is_new_user,
      is_pro,
      vertical,
      logical_category
    ]
  participant: { user: fake_user_id }
  primary_subject: user
  dtm: event_date


delivery_stream:
  metric_configs: [ delivery_stream ]
  connections: [vertica, trino]
  sql: delivery_stream
  column_map:
    item: item_id
    cookie: cookie_id
    user: user_id
  dimensions:
    - platform
    - vertical
    - logical_category
    - category
    - subcategory
    - param1
    - param2
    - param3
    - param4
    - is_intercity
    - is_asd
    - asd_user_group
    - buyer_location
    - buyer_region
    - buyer_city
    - buyer_location_group
    - buyer_location_level
    - buyer_population_group
    - location
    - region
    - city
    - location_group
    - population_group
    - location_level
    - is_cart
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date


profilepromo_funnel:
  metric_configs: [ profilepromo_funnel ]
  connections: [vertica, trino]
  sql: profilepromo_funnel
  dimensions:
      [
        platform,
        vertical,
        logical_category,
        region ]
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
  dtm: event_date


charity_donations:
  metric_configs: [ charity_donations ]
  connections: [vertica]
  sql: charity_donations
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date


profile_coverage_m42:
  metric_configs: [profile_coverage_m42]
  connections: [vertica]
  sql: profile_coverage_m42
  participant: { user: _ } # No participants in table, just value by date.
  primary_subject: user
  dtm: event_date


buyout_requests:
  metric_configs: [buyout_requests]
  connections: [vertica]
  sql: buyout_requests
  dimensions:
    [
      platform,
      region,
      city,
      vertical,
      logical_category,
    ]
  participant: { user: user_id }
  primary_subject: user
  dtm: event_date


credit_2:
  metric_configs: [ credit_c2cloans ]
  connections: [ vertica ]
  sql: clickstream_c2c_counters
  column_map:
    cookie: cookie_id
  dimensions: [ platform, location ]
  dtm: event_date
  participant: { visitor: cookie_id, user: user_id }
  primary_subject: visitor
